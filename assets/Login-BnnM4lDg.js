import{_ as V}from"./Button-D14Q4G7_.js";import{_ as v,a as C}from"./GoogleAuth.vue_vue_type_script_setup_true_lang-DlXvwi_H.js";import{C as w,a2 as S,D as b,F as N,Q as R,H as x,I as h,R as n,K as i,J as d,S as q,N as y,ay as B,ao as I}from"./common-BIwoD4Gb.js";import{ab as $,a8 as E,a9 as l,ac as z}from"./index-C0avKrge.js";import"./_commonjsHelpers-BosuxZz1.js";function D(a){return a=a.trim(),/^[0-9a-zA-Z_.-]+[@][0-9a-zA-Z_.-]+([.][a-zA-Z]+){1,2}$/.test(a)}const L={class:"space-y-3"},P={class:"mt-1! block text-right font-bold text-current"},U=w({__name:"EmailAuth",emits:["success","error"],setup(a,{emit:c}){const u=c,s=S($),e=b({email:s==null?void 0:s.value,password:""}),t=N(!1),m=async()=>{if(e.email){if(!D(e.email)){l({type:"error",message:"Incorrect email address."});return}}else{l({type:"error",message:"Email is required."});return}if(!e.password){l({type:"error",message:"Password is required."});return}t.value=!0;try{const r=await B(e);I(r),u("success",r)}catch(r){r.code===10002?l({type:"error",message:"Email or password is incorrect."}):l({type:"error",message:"Network error please check and retry."}),u("error",r.msg)}t.value=!1},p=E();async function _(){await p.push("/register")}return(r,o)=>{const g=v,k=R("RouterLink"),A=V;return x(),h("div",L,[n(g,{modelValue:i(e).email,"onUpdate:modelValue":o[0]||(o[0]=f=>i(e).email=f),type:"text",icon:"i-line-md:email-twotone-alt text-blue-500",placeholder:"Enter your email address.",autofocus:"",required:""},null,8,["modelValue"]),n(g,{modelValue:i(e).password,"onUpdate:modelValue":o[1]||(o[1]=f=>i(e).password=f),type:"password",icon:"i-ant-design:lock-twotone text-orange-500",placeholder:"Enter your password.",required:""},null,8,["modelValue"]),d("p",P,[n(k,{class:"hover:underline hover:underline-current",to:"/resetPsw"},{default:q(()=>o[2]||(o[2]=[y("Forget Password?")])),_:1})]),n(A,{loading:i(t),icon:"i-ic:twotone-security",type:"success",text:"Sign in with Email",onClick:m},null,8,["loading"]),d("p",{class:"text-sm font-bold text-dark-50 text-center"},[o[3]||(o[3]=y(" New to SaveMyDayApp? ")),d("span",{class:"text-current underline underline-current cursor-pointer",onClick:_},"Create my account.")])])}}}),Z={space:"y-3",md:"w-lg!"},H=w({__name:"Login",setup(a){const c=E(),u=z();function s(){var t;c.push(((t=u.query)==null?void 0:t.next)||"/"),console.log("Auth successful.")}function e(t){console.log("Auth faild",t)}return(t,m)=>{const p=C,_=U;return x(),h("div",Z,[n(p,{onSuccess:s,onError:e}),m[0]||(m[0]=d("p",{text:"sm center"},"or",-1)),n(_,{onSuccess:s,onError:e})])}}});export{H as default};
