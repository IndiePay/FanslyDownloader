import{_ as C}from"./Button-D14Q4G7_.js";import{ac as E}from"./index-C0avKrge.js";import{C as b,a0 as m,D as N,F as u,I as a,J as s,O as f,K as o,ac as p,R as _,a2 as S,H as r}from"./common-BIwoD4Gb.js";import"./_commonjsHelpers-BosuxZz1.js";const R={class:"flex flex-col items-center space-y-5"},B={class:"flex items-center space-x-5"},$={class:"text-sm text-gray"},j={class:"w-md text-lg space-y-3"},q={class:"flex justify-between"},F={class:"flex-row-center space-x-3"},M={key:0,class:"i-fa:question text-gray"},V={key:1,class:"i-fa:close text-red-400 mx-auto"},D={key:2,class:"i-fa:check text-green-400 mx-auto"},H={class:"w-30"},J={class:"flex justify-between"},K={class:"flex-row-center space-x-3"},O={key:0,class:"i-fa:question text-gray"},P={key:1,class:"i-fa:close text-red-400 mx-auto"},Y={key:2,class:"i-fa:check text-green-400 mx-auto"},A={class:"w-30"},I={key:0,class:"w-full p-4 border rounded-md text-base text-dark bg-orange-100"},W=b({__name:"Check",setup(L){const k=t=>{switch(t.status){case 401:return"Your session has expired, please log in again.";case 429:return"Limit refresh every minute, please try again later.";default:return`${t.code}: ${t.message}`}},h=E(),x=m(()=>{const t=JSON.parse(h.query.error);return k(t)}),n=N({session:0,network:0}),c=u(!1),y=async()=>{c.value=!0;const t=await chrome.runtime.sendMessage({method:"RECHECK"});n.session=t?2:1,c.value=!1},l=u(!1),i=u(""),g=S("checkFn"),v=async()=>{var t;l.value=!0;try{const e=await g.value();n.network=2,i.value=""}catch(e){e.status||(e.status=((t=e.response)==null?void 0:t.status)||0),i.value=k(e),n.network=1}l.value=!1},w=m(()=>n.session==2&&n.network==2);return(t,e)=>{const d=C;return r(),a("div",R,[s("div",B,[e[2]||(e[2]=s("div",{class:"i-fa:warning w-8 h-8 text-orange-500"},null,-1)),s("div",null,[e[1]||(e[1]=s("h1",{class:"text-2xl font-bold text-gray-dark"},"An error occurred during the download process",-1)),s("p",$,f(o(x)),1)])]),s("div",j,[s("div",q,[s("div",F,[e[3]||(e[3]=s("p",null,"Session Status: ",-1)),o(n).session==0?(r(),a("div",M)):o(n).session==1?(r(),a("div",V)):o(n).session==2?(r(),a("div",D)):p("",!0)]),s("div",H,[_(d,{loading:o(c),onClick:y,type:"primary",text:"Check"},null,8,["loading"])])]),s("div",J,[s("div",K,[e[4]||(e[4]=s("p",null,"Network Status: ",-1)),o(n).network==0?(r(),a("div",O)):o(n).network==1?(r(),a("div",P)):o(n).network==2?(r(),a("div",Y)):p("",!0)]),s("div",A,[_(d,{loading:o(l),onClick:v,type:"primary",text:"Check"},null,8,["loading"])])])]),o(i)?(r(),a("div",I,[s("p",null,f(o(i)),1)])):p("",!0),_(d,{type:o(w)?"success":"primary",icon:"i-ant-design:home-twotone",onClick:e[0]||(e[0]=T=>t.$router.push("/")),text:"RETRY"},null,8,["type"])])}}});export{W as default};
