import{_ as C}from"./Button-CGA1Eq9G.js";import{ad as E}from"./index-CJ0pS1bX.js";import{C as b,a2 as k,D as N,F as u,I as a,J as e,Q as m,K as t,ae as _,T as h,a4 as S,H as c}from"./common-_MJlLFcq.js";const B={class:"flex flex-col items-center space-y-5"},R={class:"flex items-center space-x-5"},$=e("div",{class:"i-fa:warning w-8 h-8 text-orange-500"},null,-1),j=e("h1",{class:"text-2xl font-bold text-gray-dark"},"An error occurred during the download process",-1),q={class:"text-sm text-gray"},F={class:"w-md text-lg space-y-3"},M={class:"flex justify-between"},V={class:"flex-row-center space-x-3"},D=e("p",null,"Session Status: ",-1),H={key:0,class:"i-fa:question text-gray"},J={key:1,class:"i-fa:close text-red-400 mx-auto"},K={key:2,class:"i-fa:check text-green-400 mx-auto"},P={class:"w-30"},T={class:"flex justify-between"},Y={class:"flex-row-center space-x-3"},A=e("p",null,"Network Status: ",-1),I={key:0,class:"i-fa:question text-gray"},L={key:1,class:"i-fa:close text-red-400 mx-auto"},O={key:2,class:"i-fa:check text-green-400 mx-auto"},Q={class:"w-30"},z={key:0,class:"w-full p-4 border rounded-md text-base text-dark bg-orange-100"},ee=b({__name:"Check",setup(G){const p=s=>{switch(s.status){case 401:return"Your session has expired, please log in again.";case 429:return"Limit refresh every minute, please try again later.";default:return`${s.code}: ${s.message}`}},f=E(),x=k(()=>{const s=JSON.parse(f.query.error);return p(s)}),o=N({session:0,network:0}),i=u(!1),y=async()=>{i.value=!0;const s=await chrome.runtime.sendMessage({method:"RECHECK"});o.session=s?2:1,i.value=!1},l=u(!1),r=u(""),g=S("checkFn"),v=async()=>{var s;l.value=!0;try{const n=await g.value();o.network=2,r.value=""}catch(n){n.status||(n.status=((s=n.response)==null?void 0:s.status)||0),r.value=p(n),o.network=1}l.value=!1},w=k(()=>o.session==2&&o.network==2);return(s,n)=>{const d=C;return c(),a("div",B,[e("div",R,[$,e("div",null,[j,e("p",q,m(t(x)),1)])]),e("div",F,[e("div",M,[e("div",V,[D,t(o).session==0?(c(),a("div",H)):t(o).session==1?(c(),a("div",J)):t(o).session==2?(c(),a("div",K)):_("",!0)]),e("div",P,[h(d,{loading:t(i),onClick:y,type:"primary",text:"Check"},null,8,["loading"])])]),e("div",T,[e("div",Y,[A,t(o).network==0?(c(),a("div",I)):t(o).network==1?(c(),a("div",L)):t(o).network==2?(c(),a("div",O)):_("",!0)]),e("div",Q,[h(d,{loading:t(l),onClick:v,type:"primary",text:"Check"},null,8,["loading"])])])]),t(r)?(c(),a("div",z,[e("p",null,m(t(r)),1)])):_("",!0),h(d,{type:t(w)?"success":"primary",icon:"i-ant-design:home-twotone",onClick:n[0]||(n[0]=U=>s.$router.push("/")),text:"RETRY"},null,8,["type"])])}}});export{ee as default};
