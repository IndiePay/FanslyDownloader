import{_ as S}from"./Button-CGA1Eq9G.js";import{ae as h,a9 as N,C as B,aa as p,ab as E}from"./index-CJ0pS1bX.js";import{E as D,b as P}from"./el-radio-group-G8YO05ul.js";import{C as R,y as H,a2 as K,D as M,I as a,K as t,T as o,J as s,P as _,Q as O,ae as d,U as y,S as W,H as n,N as Y,O as j,aH as G,aI as J}from"./common-_MJlLFcq.js";const l=c=>(Y("data-v-d217cf51"),c=c(),j(),c),Q={class:"flex flex-col space-y-2",md:"w-500px"},q={key:0,class:"flex flex-row items-center space-x-1 px-3 py-2 bg-blue-100 text-blue-500 text-xs border border-blue-200 rounded-md"},z={key:1,class:""},A=l(()=>s("h2",{class:"text-base font-bold"},"You'll miss out on...",-1)),F=l(()=>s("ul",{class:"flex flex-col justify-center items-center text-gray-600 text-sm list-circle"},[s("li",null,"Bulk download images and videos.")],-1)),L=[A,F],X={key:2,class:"step"},Z=l(()=>s("h2",null,"Why do you want to cancel?",-1)),$={key:3,class:"step"},ee=l(()=>s("h2",null,"Why do you want to cancel?",-1)),se={class:"button-group"},te=l(()=>s("span",null,[_(" Keep Pro "),s("sup",null,"+")],-1)),oe=R({__name:"Unsubscribe",setup(c){const{grade:x,email:b,token:g,member_time:w}=H().value;h("unsubscribe_page");const k=K(()=>Math.ceil((new Date(w).getTime()-new Date().getTime())/(1e3*60*60*24))),e=M({index:1,hasTips:!0,reason:"",feedback:""});async function v(){switch(e.index){case 1:e.index++;break;case 2:if(e.reason.length===0){p({type:"warning",message:"Please select the reason for unsubscribe."});return}e.hasTips=!1,e.index++;break;case 3:e.feedback!=""&&await G({email:b,message:e.feedback}),await h({name:"unsubscribe_button",data:{reason:e.reason,feedback:e.feedback}});try{await J({grade:x,email:b,token:g}),p({type:"success",message:"Unsubscribed successfully."}),m.push("/")}catch{p({type:"error",message:"Network error, please try again later."})}break}}const m=N();function I(){m.push("/subscribe")}return(V,r)=>{const C=W("ant-design:bell-twotone"),i=P,T=D,U=B,f=S;return n(),a("div",Q,[t(e).hasTips?(n(),a("div",q,[o(C),s("p",null,[_(" You still have "),s("strong",null,O(t(k))+" days left",1),_(" in your Pro period. ")])])):d("",!0),t(e).index==1?(n(),a("div",z,L)):d("",!0),t(e).index==2?(n(),a("div",X,[Z,o(T,{modelValue:t(e).reason,"onUpdate:modelValue":r[0]||(r[0]=u=>t(e).reason=u)},{default:y(()=>[o(i,{label:"I don't use all of the feature"}),o(i,{label:"It doesn't work properly"}),o(i,{label:"I want to change to a yearly subscription"}),o(i,{label:"Other"})]),_:1},8,["modelValue"])])):d("",!0),t(e).index==3?(n(),a("div",$,[ee,o(U,{modelValue:t(e).feedback,"onUpdate:modelValue":r[1]||(r[1]=u=>t(e).feedback=u),rows:4,type:"textarea",maxlength:"200",placeholder:"Tell us why you're canceling...","show-word-limit":""},null,8,["modelValue"])])):d("",!0),s("div",se,[o(f,{icon:"i-ant-design:crown-twotone",type:"success",onClick:I},{default:y(()=>[te]),_:1}),o(f,{icon:"i-ant-design:alert-twotone",type:"danger",text:"Canceled subscription",onclick:v})])])}}}),re=E(oe,[["__scopeId","data-v-d217cf51"]]);export{re as default};
