import{_ as U}from"./Button-D14Q4G7_.js";import{ad as f,a8 as B,B as I,a9 as d,aa as N}from"./index-C0avKrge.js";import{E,b as R}from"./el-radio-group-CftBhpfx.js";import{C as D,y as S,a0 as P,D as G,I as n,K as o,R as a,J as t,N as c,O as K,ac as i,S as _,Q as M,H as l,aF as O,aG as W}from"./common-BIwoD4Gb.js";import"./_commonjsHelpers-BosuxZz1.js";const Y={class:"flex flex-col space-y-2",md:"w-500px"},j={key:0,class:"flex flex-row items-center space-x-1 px-3 py-2 bg-blue-100 text-blue-500 text-xs border border-blue-200 rounded-md"},F={key:1,class:""},H={key:2,class:"step"},J={key:3,class:"step"},Q={class:"button-group"},q=D({__name:"Unsubscribe",setup(z){const{grade:y,email:p,token:x,member_time:g}=S().value;f("unsubscribe_page");const w=P(()=>Math.ceil((new Date(g).getTime()-new Date().getTime())/(1e3*60*60*24))),e=G({index:1,hasTips:!0,reason:"",feedback:""});async function k(){switch(e.index){case 1:e.index++;break;case 2:if(e.reason.length===0){d({type:"warning",message:"Please select the reason for unsubscribe."});return}e.hasTips=!1,e.index++;break;case 3:e.feedback!=""&&await O({email:p,message:e.feedback}),await f({name:"unsubscribe_button",data:{reason:e.reason,feedback:e.feedback}});try{await W({grade:y,email:p,token:x}),d({type:"success",message:"Unsubscribed successfully."}),b.push("/")}catch{d({type:"error",message:"Network error, please try again later."})}break}}const b=B();function h(){b.push("/subscribe")}return(v,s)=>{const V=M("ant-design:bell-twotone"),r=R,C=E,T=I,m=U;return l(),n("div",Y,[o(e).hasTips?(l(),n("div",j,[a(V),t("p",null,[s[2]||(s[2]=c(" You still have ")),t("strong",null,K(o(w))+" days left",1),s[3]||(s[3]=c(" in your Pro period. "))])])):i("",!0),o(e).index==1?(l(),n("div",F,s[4]||(s[4]=[t("h2",{class:"text-base font-bold"},"You'll miss out on...",-1),t("ul",{class:"flex flex-col justify-center items-center text-gray-600 text-sm list-circle"},[t("li",null,"Bulk download images and videos.")],-1)]))):i("",!0),o(e).index==2?(l(),n("div",H,[s[5]||(s[5]=t("h2",null,"Why do you want to cancel?",-1)),a(C,{modelValue:o(e).reason,"onUpdate:modelValue":s[0]||(s[0]=u=>o(e).reason=u)},{default:_(()=>[a(r,{label:"I don't use all of the feature"}),a(r,{label:"It doesn't work properly"}),a(r,{label:"I want to change to a yearly subscription"}),a(r,{label:"Other"})]),_:1},8,["modelValue"])])):i("",!0),o(e).index==3?(l(),n("div",J,[s[6]||(s[6]=t("h2",null,"Why do you want to cancel?",-1)),a(T,{modelValue:o(e).feedback,"onUpdate:modelValue":s[1]||(s[1]=u=>o(e).feedback=u),rows:4,type:"textarea",maxlength:"200",placeholder:"Tell us why you're canceling...","show-word-limit":""},null,8,["modelValue"])])):i("",!0),t("div",Q,[a(m,{icon:"i-ant-design:crown-twotone",type:"success",onClick:h},{default:_(()=>s[7]||(s[7]=[t("span",null,[c(" Keep Pro "),t("sup",null,"+")],-1)])),_:1}),a(m,{icon:"i-ant-design:alert-twotone",type:"danger",text:"Canceled subscription",onclick:k})])])}}}),ee=N(q,[["__scopeId","data-v-d217cf51"]]);export{ee as default};
